<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.pofo.pofoapiboot3.repository.NotificationRepository">
<resultMap id="notificationResultMap" type="Notification">
		<result property="regDate" column="reg_date" />
		<result property="toId" column="to_member_id" />
		<result property="fromId" column="from_member_id" />
		<result property="clicked" column="click_flag" />
		<result property="typeId" column="type_id" />
		<result property="portfolioId" column="portfolio_id" />
		<result property="communityId" column="community_id" />
</resultMap>
	
	<select id="findById" resultMap="notificationResultMap">
		select
		 	n.from_member_id,
			n.to_member_id,
			n.reg_date,
			n.type_id,
			n.click_flag,
			n.portfolio_id,
			n.community_id,
			t.url as url,
			m.image,
			m.nickname
		from
			notification n
		inner join
			notification_type t
		on
			n.type_id = t.id
		inner join
			member m
		on
			m.id = n.from_member_id
		where
			n.to_member_id = ${id}
		order by
			m.reg_date
	</select>
	
</mapper>


